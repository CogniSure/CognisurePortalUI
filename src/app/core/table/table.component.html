<div class="generic-table">
<kendo-grid #generictable
  [kendoGridBinding]="gridView"
  kendoGridSelectBy="id"
  [(selectedKeys)]="mySelection"
  [pageSize]="10"
  [pageable]="true"
  [sortable]="true"
  [groupable]="true"
  [reorderable]="true"
  [resizable]="true"
  allowScrolling = "true"
  scrollable="scrollable"
  [columnMenu]="{ filter: true }"
  [style.maxHeight.em]="height"
  [style.maxWidth]="'auto'"
  [loading]="loading"
  [selectable]="selectableSettings"
  [style]="'border-radius: 14px;overflow: hidden'"
>
  <ng-template kendoGridToolbarTemplate>
    <kendo-textbox
      [style.width]="'25%'"
      [style.border.px]="2"
      placeholder="Search in all columns..."
      (valueChange)="onFilter($event)"
    >  <span class="search-icon">&#128269;</span> </kendo-textbox>
    <kendo-grid-spacer></kendo-grid-spacer>
    <!-- <span class="export_dropdown">Export</span> -->
    <!-- <kendo-dropdownlist [data]="dropdownOption"
    [(ngModel)]="selectedValue"
    fillmode="solid"
    textField="label" 
    valueField="link" 
   style="background: white; border-radius: 8px;margin-left: 2%;
    "
    >
    <ng-template kendoDropDownListItemTemplate #selectedItemTemplate let-dataItem>
      <kendo-icon [name]="dataItem.icon" style="margin-right: 5px;"></kendo-icon>
      {{ dataItem.label }}
    </ng-template>
  </kendo-dropdownlist> -->


  <!-- <kendo-dropdowntree
              kendoDropDownTreeExpandable
              [kendoDropDownTreeHierarchyBinding]="treeItems"
              textField="text"
              valueField="id"
              childrenField="items"
              [value]="complexValue"
              [popupSettings]="{
                width: 'fit-content'
              }"
              [expandedKeys]="['0']"
            ></kendo-dropdowntree> -->


        
            <!-- <select>
              <option value="" selected disabled hidden> <img src="../../../assets/images/download-icon.jpg"></option>
              <option value="1">
 <button kendoGridExcelCommand type="button" style="background-image: none;">
      <img class="excel_icon" src="../../../assets/images/XL.svg" style="width:2rem;height:2rem;">
    </button>
              </option>
              <option value="2"> 
              <button kendoGridPDFCommand style="background-image: none;">
                <img class="pdf_icon" src="../../../assets/images/PDF.svg" style="width:2rem;height:2rem;">
              </button></option>
            </select> -->
<!-- 
            <span><img src="../../../assets/images/download-icon.jpg"></span> -->

            <!-- <div class="dropdown">
              
              <button class="dropdown-button"></button>
              <div class="dropdown-content">
                  <div>
                    <button kendoGridExcelCommand type="button" style="background-image: none;">
                      <img class="excel_icon" src="../../../assets/images/XL.svg" style="width:2rem;height:2rem;">
                    </button>
                  </div>
                  <div>
                    <button kendoGridPDFCommand style="background-image: none;">
                      <img class="pdf_icon" src="../../../assets/images/PDF.svg" style="width:2rem;height:2rem;">
                    </button>
                  </div>
              </div>
          </div> -->



        <!-- <div class="">
          <kendo-dropdownlist
          [data]="dropdownOption"
          [(ngModel)]="selectedValue"
          textField="label"
          valueField="value"
          style="background: white; border-radius: 8px; margin-left: 0.5%;"
        >
          Export
        </kendo-dropdownlist>
        
        <ng-template #itemTemplate let-dataItem>
          <div style="display: flex; align-items: center;">
            <img [src]="dataItem.imageUrl" alt="Image" style="width: 20px; height: 20px; margin-right: 8px;">
            <span>{{ dataItem.label }}</span>
            <span style="margin-left: 8px;">({{ dataItem.value }})</span>
          </div>
        </ng-template>
</div> -->

          

<!-- <button kendoGridExcelCommand type="button" style="background-image: none;">
  <img class="excel_icon" src="../../../assets/images/XL.svg" style="width:2rem;height:2rem;">
</button>
          <button kendoGridPDFCommand style="background-image: none;">
            <img class="pdf_icon" src="../../../assets/images/PDF.svg" style="width:2rem;height:2rem;">
          </button> -->



<!-- 
          <kendo-splitbutton
      [data]="shareData"
      [arrowButtonSvgIcon]="svgArrow"
     
    >
    Export

    </kendo-splitbutton> -->



    <kendo-splitbutton [data]="export">
      <span class="export_psdxl">Export</span>
      <ng-template kendoSplitButtonItemTemplate let-dataItem>
        <button *ngIf="dataItem.text == 'excel'" kendoGridExcelCommand type="button" style="background-image: none;">
          <span class="export_xl">Export as XL</span>
          <img class="excel_icon" src="../../../assets/images/XL.svg" style="width:1.5rem;height:1rem;padding-left: 10%;">
        </button>
        <button *ngIf="dataItem.text == 'pdf'" kendoGridPDFCommand style="background-image: none;">
          <span class="export_pdf">Export as pdf</span>
          <img class="pdf_icon" src="../../../assets/images/PDF.svg" style="width:1.5rem;height:1rem;padding-left: 10%;">
        </button>
      </ng-template>
    </kendo-splitbutton>



    <!-- <kendo-splitbutton [data]="exdata">
      Save
      <ng-template kendoSplitButtonItemTemplate let-dataItem>
        <em>{{ dataItem.text }}</em>
      </ng-template>
      <ng-template kendoSplitButtonItemTemplate let-dataItem>
        <em>{{dataItem.imageUrl }}</em>
      </ng-template>

    </kendo-splitbutton> -->


    <!-- <kendo-splitbutton>
      <ng-container *ngFor="let item of shareData1">
        <kendo-button 
          *ngIf="!item.isDisabled"
          (click)="onButtonClick(item.text)"
        >
          <span [class]="item.iconClass"></span>
          {{ item.text }}
        </kendo-button>
        <kendo-button
          *ngIf="item.isDisabled"
          [disabled]="true"
        >
          <span [class]="item.iconClass"></span>
          {{ item.text }}
        </kendo-button>
      </ng-container>
    </kendo-splitbutton> -->


    <!-- <kendo-splitbutton [arrowButtonSvgIcon]="svgArrow" [data]="shareData">
        <button *ngIf="!item.isDisabled" (click)="onButtonClick(item.text)">
          <img [src]="item.imageUrl" alt="{{ item.text }}" />
          {{ item.text }}
        </button>
        <button *ngIf="item.isDisabled" disabled>
          <img [src]="item.imageUrl" alt="{{ item.text }}" />
          {{ item.text }}
        </button>
    </kendo-splitbutton> -->








          
    <!-- <button kendoGridExcelCommand type="button" style="background-image: none;">
      <img class="excel_icon" src="../../../assets/images/XL.svg" style="width:2rem;height:2rem;"> -->
    

      <!-- <kendo-svg-icon [icon]="excelSVG" size="xxlarge"><img src="../../../assets/images/XL.svg"></kendo-svg-icon> -->
    <!-- </button> -->
    <!-- <button kendoGridPDFCommand style="background-image: none;">
      <img class="pdf_icon" src="../../../assets/images/PDF.svg" style="width:2rem;height:2rem;"> -->
      <!-- <kendo-svg-icon [icon]="pdfSVG" size="xxlarge" style="color: red;"><img src="../../../assets/images/PDF.svg"></kendo-svg-icon> -->
    <!-- </button> -->
  </ng-template>

  <ng-template ngFor [ngForOf]="columns" let-column>
    <kendo-grid-column
      *ngIf="column.type == 'text'"
      field="{{ column.field }}"
      title="{{ column.title }}"
      format="{{ column.format }}"
      [filterable]="column.filterable"
      [sortable]="column.sortable"
      [filter]="column.type"
      [width]="column.width"
      [columnMenu]="column.columnmenu"
      [editor]="column.editor"
    >
      <ng-template
        kendoGridCellTemplate
        let-dataItem
        let-rowIndex="rowIndex"
        let-value="value"
      >

      <!-- <div
      [class.fixed-height-cell]="!dataItem.isExpanded"
      [class.expanded-cell]="dataItem.isExpanded"
      (click)="toggleCellExpansion(dataItem)"
    >
      {{ dataItem[column.field] }}
    </div> -->
    <div
      [class.fixed-height-cell]="!cellExpansionState[rowIndex]"
      [class.expanded-cell]="cellExpansionState[rowIndex]"
      (click)="toggleCellExpansion(dataItem)"
    >
      {{ dataItem[column.field] }}
    </div>
      </ng-template>
    </kendo-grid-column>
    <kendo-grid-column
      *ngIf="column.type == 'link'"
      field="{{ column.field }}"
      title="{{ column.title }}"
      format="{{ column.format }}"
      [filterable]="column.filterable"
      [sortable]="column.sortable"
      [filter]="column.type"
      [width]="column.width"
      [columnMenu]="column.columnmenu"
    >
      <ng-template
        kendoGridCellTemplate
        let-dataItem
        let-rowIndex="rowIndex"
        let-value="value"
      >
        <a routerLink="/inbox/detail/summary" [ngStyle]="{ color: 'blue' }">
          {{ dataItem[column.field] }}</a
        >
      </ng-template>
    </kendo-grid-column>
    <kendo-grid-column
      *ngIf="column.type == 'checkbox'"
      field="{{ column.field }}"
      title="{{ column.title }}"
      format="{{ column.format }}"
      [filterable]="column.filterable"
      [sortable]="column.sortable"
      [filter]="column.type"
      [width]="column.width"
      [columnMenu]="column.columnmenu"
    >
      <ng-template
        kendoGridHeaderTemplate
        let-column
        let-columnIndex="columnIndex"
      >
        <input type="checkbox" 
        kendoCheckBox 
        [checked]="selectedCheckbox === columnIndex"
        (change)="onCheckboxChange(columnIndex)"
         />
      
      </ng-template>
      <ng-template
        kendoGridCellTemplate
        let-dataItem
        let-rowIndex="rowIndex"
        let-value="value"
      >
      
        <input type="checkbox" 
        kendoCheckBox 
        [checked]="isSelected(dataItem)" 
        (change)="onCheckBoxChange($event, dataItem)"
        />
      </ng-template>
    </kendo-grid-column>
    <kendo-grid-column
      *ngIf="column.type == 'icon'"
      field="{{ column.field }}"
      title="{{ column.title }}"
      format="{{ column.format }}"
      [filterable]="column.filterable"
      [sortable]="column.sortable"
      [filter]="column.type"
      [width]="column.width"
      [columnMenu]="column.columnmenu"
    >
      <ng-template
        kendoGridCellTemplate
        let-dataItem
        let-rowIndex="rowIndex"
        let-value="value"
      >
        <span class="k-icon k-i-import"></span>
      </ng-template>
    </kendo-grid-column>

    <kendo-grid-column
      *ngIf="column.type == 'alerts'"
      field="{{ column.field }}"
      title="{{ column.title }}"
      format="{{ column.format }}"
      [filterable]="column.filterable"
      [sortable]="column.sortable"
      [filter]="column.type"
      [width]="column.width"
      [columnMenu]="column.columnmenu"
    >
      <ng-template
        kendoGridHeaderTemplate
        let-column
        let-columnIndex="columnIndex"
      >

        <div >
          <div style="text-align: center">
            <!-- {{ column.title }}  -->
          </div>
          <div class="image-row">
          <div *ngFor="let data of navData" class="image-container">
            <img
            [src]="data.imagePath" 
              style="padding: 0 0.25em 0 0.25em;"
              matTooltip={{data.label}}
            />

            <!-- <img
              src="../../../assets/images/Completeness Check.svg"
              style="padding: 0 0.25em 0 0.25em;"
            />
            <img
              src="../../../assets/images/Risk Clearance.svg"
              style="padding: 0 0.25em 0 0.25em;"
            /> -->
          </div>
          </div>
        </div>
      </ng-template>
      <ng-template
        kendoGridCellTemplate
        let-dataItem
        let-rowIndex="rowIndex"
        let-value="value"
      >
        <div style="display: flex; justify-content: center;">
          <!-- <span class="k-icon k-i-circle" style="color:#80808059;"></span>
          <span class="k-icon k-i-circle" style="color:#80808059;"></span> -->
          <span class="k-icon k-i-circle" style="color:#80808059;"></span>
        </div>
      </ng-template>
    </kendo-grid-column>


    <kendo-grid-column
    *ngIf="column.type == 'SubmissionId'"
    field="{{ column.field }}"
    title="{{ column.title }}"
    format="{{ column.format }}"
    [filterable]="column.filterable"
    [sortable]="column.sortable"
    [filter]="column.type"
    [width]="column.width"
    [columnMenu]="column.columnmenu"
  >
    <ng-template
      kendoGridCellTemplate
      let-dataItem
      let-rowIndex="rowIndex"
      let-value="value"
      style="width:100%"
    >
      <ng-container>
        <a class ="submissionid" routerLink="{{column.redirectUrl}}" (click)="reDirect(column.redirectUrl,dataItem)" [ngStyle]="{ color: '#009CC1' }">
          {{ dataItem[column.field] }}
        <span class="newtext" *ngIf="dataItem[column.IsNew]">New</span>
        <span class="submissionicon"><span class="k-icon k-i-email"></span></span>
        </a>
      </ng-container>
      <!-- <ng-container *ngIf="column.type === 'icon1'">
        <span class="k-icon k-i-email"></span>
      </ng-container> -->
      <!-- <ng-container *ngIf="column.type === 'text1'">
        <span>New</span>
      </ng-container> -->
    </ng-template>
  </kendo-grid-column>

  <!-- <kendo-grid-column>
  <ng-template kendoGridCellTemplate let-dataItem>
    <ng-container *ngIf="dataItem.S360Report">
      <a [href]="generateDownloadLink(dataItem.S360Report)" download>
        Download
      </a>
    </ng-container>
    <ng-container *ngIf="!dataItem.S360Report">
      N/A
    </ng-container>
  </ng-template>
</kendo-grid-column> -->

  <kendo-grid-column
  *ngIf="column.type == 'DownloadXL'"
  field="{{ column.field }}"
  title="{{ column.title }}"
  format="{{ column.format }}"
  [filterable]="column.filterable"
  [sortable]="column.sortable"
  [filter]="column.type"
  [width]="column.width"
  [columnMenu]="column.columnmenu"
  [editor]="column.editor"
>
<ng-template kendoGridCellTemplate let-dataItem>
  <!-- <ng-container *ngIf="!dataItem.S360Report"> -->
    <!-- <a [href]="generateDownloadLink(dataItem.S360Report)" download> -->
      <!-- Download -->
      <!-- <a color="primary" class="excel_download" (click) = "DownloadEvent(dataItem)">
      <span class="excel_icon">
        <img src="../../../assets/images/execl_downloadimg.png">
      </span>
      </a> -->
    <!-- </a> -->
  <!-- </ng-container> -->
  <!-- <ng-container *ngIf="dataItem.S360Report">
    N/A
    <img src="../../../assets/images/disabled_excel.png">
  </ng-container> -->
  <ng-container *ngIf="dataItem.Status === 'Completed'; else inProgressTemplate">
    <a color="primary" class="excel_download" (click) = "DownloadEvent(dataItem)">
    <img src="../../../assets/images/execl_downloadimg.png" alt="Green Image">
    </a>
  </ng-container>
  <ng-template #inProgressTemplate>
    <img src="../../../assets//images/disabled_excel.png" alt="Gray Image">
  </ng-template>
</ng-template>
</kendo-grid-column>

<kendo-grid-column
      *ngIf="column.type == 'dropdown'"
      field="{{ column.field }}"
      title="{{ column.title }}"
      format="{{ column.format }}"
      [filterable]="column.filterable"
      [sortable]="column.sortable"
      [filter]="column.type"
      [width]="column.width"
      [columnMenu]="column.columnmenu"
      [editor]="column.editor"
    >

    <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
      <!-- <kendo-dropdownlist
        [data]="Priorities"
        textField="PriorityName"
        valueField="PriorityID"
        [valuePrimitive]="true"
        [formControl]="formGroup.get('Priority')"
      ></kendo-dropdownlist> -->
    </ng-template>
    </kendo-grid-column>

    <kendo-grid-column
    *ngIf="column.type == 'priority'"
    field="{{ column.field }}"
    title="{{ column.title }}"
    format="{{ column.format }}"
    [filterable]="column.filterable"
    [sortable]="column.sortable"
    [filter]="column.type"
    [width]="column.width"
    [columnMenu]="column.columnmenu"
    [editor]="column.editor"
  >

  <ng-template
    kendoGridEditTemplate
    let-dataItem="dataItem"
    let-formGroup="formGroup"
  >
    <kendo-dropdownlist
    *ngIf="dataLoaded"
      [formControl]="formGroup.get(column.field)"
      [data]="dropdownData"
      [(ngModel)]="selectedValue"
      textField="label"
      valueField="value"
    ></kendo-dropdownlist>
  </ng-template>
  <!-- <ng-template
    kendoGridCellTemplate
    let-dataItem
    let-rowIndex="rowIndex"
    let-value="value"
  >
    <ng-container *ngIf="isCellEditable(dataItem, column)">
      <kendo-dropdownlist
        [data]="dropdownData"
        [(ngModel)]="selectedValues[dataItem.id]"
        textField="label"
        valueField="value"
      ></kendo-dropdownlist>
    </ng-container>
    <ng-container *ngIf="!isCellEditable(dataItem, column)">
      {{ dataItem[column.field] }}
    </ng-container>
  </ng-template> -->


  <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex" let-value="value">
    <ng-container *ngIf="isCellEditable(dataItem, column)">
      <kendo-dropdownlist
        [data]="dropdownData"
        [ngModel]="selectedValue"
        (ngModelChange)="onDropdownChange(dataItem, $event)"
        textField="label"
        valueField="value"
      ></kendo-dropdownlist>
    </ng-container>
    <ng-container *ngIf="!isCellEditable(dataItem, column)">
      {{ dataItem[column.field] }}
    </ng-container>
  </ng-template>


  </kendo-grid-column>

  <kendo-grid-column
  *ngIf="column.type == 'agencyname'"
  field="{{ column.field }}"
  title="{{ column.title }}"
  format="{{ column.format }}"
  [filterable]="column.filterable"
  [sortable]="column.sortable"
  [filter]="column.type"
  [width]="column.width"
  [columnMenu]="column.columnmenu"
  [editor]="column.editor"

>

<ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex" let-value="value">
  <ng-container *ngIf="isCellEditable(dataItem, column)">
    <kendo-textbox [value]="dataItem[column.field]">{{ dataItem[column.field] }}</kendo-textbox>
  </ng-container>
  <!-- <ng-container *ngIf="!isCellEditable(dataItem, column)">
    {{ dataItem[column.field] }}
  </ng-container> -->
</ng-template>

<!-- <ng-template
kendoGridEditTemplate
let-dataItem="dataItem"
let-formGroup="formGroup"
>
<kendo-textboxrowIndex
  [formControl]="formGroup.get(column.field)"
  [value]="dataItem[column.field]"
></kendo-textbox> -->
<!-- <kendo-textbox [formControl]="formGroup.get('agencyname')" [(ngModel)]="dataItem.agencyname"></kendo-textbox> -->
<!-- </ng-template> -->

<!-- <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
  <input [formControl]="formGroup.get(column.field)" [(ngModel)]="dataItem[column.field]" />
</ng-template> -->

<ng-template
kendoGridCellTemplate
let-dataItem
let-rowIndex="rowIndex"
let-value="value"
>
<div
  [class.fixed-height-cell]="!cellExpansionState[rowIndex]"
  [class.expanded-cell]="cellExpansionState[rowIndex]"
  (click)="toggleCellExpansion(dataItem)"
>
  {{ dataItem[column.field] }}
</div>
</ng-template>
</kendo-grid-column>

<kendo-grid-column
  *ngIf="column.type == 'LOB'"
  field="{{ column.field }}"
  title="{{ column.title }}"
  format="{{ column.format }}"
  [filterable]="column.filterable"
  [sortable]="column.sortable"
  [filter]="column.type"
  [width]="column.width"
  [columnMenu]="column.columnmenu"
>
  <ng-template
    kendoGridCellTemplate
    let-dataItem
    let-rowIndex="rowIndex"
    let-value="value"
  >
    <div
      [class.fixed-height-cell]="!cellExpansionState[rowIndex]"
      [class.expanded-cell]="cellExpansionState[rowIndex]"
      (click)="toggleCellExpansion(dataItem)"
    >
      <!-- {{ dataItem[column.field] }}
      <span *ngIf="dataItem[column.field].extraData">{{ dataItem[column.field].extraData }}</span> -->

      <!-- <span *ngIf="!isInEditMode(dataItem)">
        {{ dataItem[column.field] }}
      </span>
      <div *ngIf="isInEditMode(dataItem)">
        <input
          kendoTextBox
          [value]="dataItem[column.field]"
          (valueChange)="onEditValueChange(newValue, $event, dataItem, column)"
        />
        <input
          kendoTextBox
          [value]="dataItem[column.field].extraData"
          (valueChange)="onEditValueChange(newValue, $event, dataItem, column)"
        />
      </div> -->



      {{ dataItem[column.field] }}
      <span *ngIf="dataItem[column.field].extraData">{{ dataItem[column.field].extraData }}</span>


    </div>
  </ng-template>
  <!-- <ng-template kendoGridCellTemplate let-dataItem let-column="column">
    <div *ngIf="column.type == 'agencyname'" [ngSwitch]="column.type">
      <div *ngSwitchDefault>
        <span *ngIf="!isInEditMode(dataItem)">
          {{ dataItem[column.field] }}
        </span>
        <input
          *ngIf="isInEditMode(dataItem)"
          kendoTextBox
          [value]="dataItem[column.field]"
          (valueChange)="onEditValueChange(newValue, $event, dataItem, column)"
        />
      </div>
    </div>
  </ng-template> -->
</kendo-grid-column>



  </ng-template>
  <ng-template kendoGridLoadingTemplate>
    <div class="k-loading-color"></div>
    <div class="loading-container">
      <kendo-loader type="converging-spinner" size="large"></kendo-loader>
    </div>
  </ng-template>
  <kendo-grid-pdf
    fileName="Employees.pdf"
    [repeatHeaders]="true"
  ></kendo-grid-pdf>
  <kendo-grid-excel fileName="Employees.xlsx"></kendo-grid-excel>
</kendo-grid>
</div>